<!-- Shared shell: header, sidebar, aside, footer -->
<!-- 模块：全站壳层 / Shared shell (header, sidebar, footer). 保留导航与动画。 -->
<header>
    <h1>
        <span class="header-title">
            <a href="/" title="主页">
                <img src="/img/shell/favicon.ico" alt="logo" class="logo" fetchpriority="high">
                <span class="title-text">主页</span>
            </a>
            <span id="page-loading-indicator" class="page-loading-indicator" aria-hidden="true"></span>
        </span>
        <div class="header-actions">
        <button class="header-search-btn" id="header-search-btn" aria-label="搜索" title="搜索">
            <i class="icon-ic_fluent_search_24_regular" aria-hidden="true"></i>
        </button>
        <button class="theme-toggle-btn" aria-label="切换深色/浅色模式" title="切换深色/浅色模式">
            <i class="fluent-font" aria-hidden="true">&#xF87E;</i>
        </button>
        <div class="theme-settings-container">
            <button class="theme-settings-btn" aria-label="设置" title="设置">
                <i class="fluent-font" aria-hidden="true">&#xF6AA;</i>
            </button>
        </div>
        <div class="language-selector-container">
            <button class="language-selector-btn" aria-label="选择语言" title="选择语言">
                <i class="fluent-font" aria-hidden="true">&#xF45B;</i>
            </button>
            <div class="language-selector-menu">
                <label class="language-option">
                    <input type="radio" name="language" value="zh-CN" aria-label="中文（简体）">
                    <span>中文（简体）</span>
                </label>
                <label class="language-option">
                    <input type="radio" name="language" value="zh-TW" aria-label="中文（繁体）">
                    <span>中文（繁体）</span>
                </label>
                <label class="language-option">
                    <input type="radio" name="language" value="en-US" aria-label="English (US)">
                    <span>English (US)</span>
                </label>
                <!-- English (Global) removed -->
                <label class="language-option">
                    <input type="radio" name="language" value="ru-RU" aria-label="Русский">
                    <span>Русский</span>
                </label>
                <label class="language-option">
                    <input type="radio" name="language" value="fr-FR" aria-label="Français">
                    <span>Français</span>
                </label>
                <label class="language-option">
                    <input type="radio" name="language" value="de-DE" aria-label="Deutsch">
                    <span>Deutsch</span>
                </label>
                <label class="language-option">
                    <input type="radio" name="language" value="ja-JP" aria-label="日本語">
                    <span>日本語</span>
                </label>
            </div>
        </div>
        <img src="/img/shell/shuiyu.avif" alt="shuiyu" class="header-avatar" id="avatar-btn" fetchpriority="high">
        <div id="avatar-links-menu" class="avatar-links-menu">
            <a href="https://github.com/whwdzg" class="avatar-link" target="_blank" rel="noopener noreferrer">
                <i class="icon-ic_fluent_animal_cat_24_regular" aria-hidden="true"></i>
                <span>GitHub</span>
            </a>
            <a href="https://space.bilibili.com/588003657" class="avatar-link" target="_blank" rel="noopener noreferrer">
                <i class="icon-ic_fluent_tv_24_regular" aria-hidden="true"></i>
                <span>bilibili</span>
            </a>
        </div>
    </h1>
</header>
<nav id="sidebar" class="sidebar" aria-label="主导航">
    <button class="sidebar-collapse-btn inner-sidebar-collapse-btn" aria-controls="sidebar" aria-expanded="true" title="折叠/展开侧边栏">
        <i class="icon-ic_fluent_list_24_regular item-icon" aria-hidden="true"></i>
    </button>
    <ul>
        <li>
            <a href="/">
                <i class="icon-ic_fluent_home_24_regular item-icon" aria-hidden="true"></i>
                <span class="label">主页</span>
            </a>
        </li>
        <li class="has-children">
            <button class="toggle" aria-expanded="false">
                <i class="icon-ic_fluent_history_24_regular item-icon" aria-hidden="true"></i>
                <span class="toggle-label">返回 1.0</span>
                <span class="toggle-icon fluent-font" aria-hidden="true">&#xF2B1;</span>
            </button>
            <ul class="submenu">
                <li>
                    <a href="/Legacy-1.0/index.html">
                        <i class="icon-ic_fluent_home_24_regular item-icon" aria-hidden="true"></i>
                        <span class="label">主页（1.0）</span>
                    </a>
                </li>
                <li>
                    <a href="/Legacy-1.0/about.html">
                        <i class="icon-ic_fluent_info_24_regular item-icon" aria-hidden="true"></i>
                        <span class="label">关于（1.0）</span>
                    </a>
                </li>
                <li>
                    <a href="/Legacy-1.0/README.md">
                        <i class="icon-ic_fluent_document_24_regular item-icon" aria-hidden="true"></i>
                        <span class="label">README（1.0）</span>
                    </a>
                </li>
            </ul>
        </li>
        <li class="has-children">
            <button class="toggle" aria-expanded="false">
                <i class="icon-ic_fluent_apps_list_24_regular item-icon" aria-hidden="true"></i>
                <span class="toggle-label">专栏</span>
                <span class="toggle-icon fluent-font" aria-hidden="true">&#xF2B1;</span>
            </button>
            <ul class="submenu">
                <li>
                    <a href="/column/psn-img-legacy.html">
                        <i class="icon-ic_fluent_image_24_regular item-icon" aria-hidden="true"></i>
                        <span class="label">个人图库</span>
                    </a>
                </li>
                <li>
                    <a href="/column/comments.html">
                        <i class="icon-ic_fluent_comment_24_regular item-icon" aria-hidden="true"></i>
                        <span class="label">评论发癫区</span>
                    </a>
                </li>
            </ul>
        </li>
        <li class="has-children">
            <button class="toggle" aria-expanded="false">
                <i class="icon-ic_fluent_tv_24_regular item-icon" aria-hidden="true"></i>
                <span class="toggle-label">视频存档</span>
                <span class="toggle-icon fluent-font" aria-hidden="true">&#xF2B1;</span>
            </button>
            <ul class="submenu">
                <li>
                    <a href="/video-archive/list-bilivideo-1.html">
                        <i class="icon-ic_fluent_channel_share_24_regular item-icon" aria-hidden="true"></i>
                        <span class="label">哔哩哔哩</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <a href="/about.html">
                    <i class="icon-ic_fluent_info_24_regular item-icon" aria-hidden="true"></i>
                    <span class="label">关于</span>
            </a>
        </li>
    </ul>
</nav>
<button id="scroll-to-top" class="scroll-to-top" aria-label="返回顶部" title="返回顶部">
    <i class="icon-ic_fluent_arrow_up_24_regular item-icon" aria-hidden="true"></i>
</button>
<aside>
    <section id="beta">
        <h3>注意</h3>
        <p>
            <strong>当前为早期测试版本，可能出现bug</strong>
        </p>
    </section>
    <section id="archives">
        <h3>返回1.0主页</h3>
        <p>
            <abbr title="1.3.12.2025.8.7-New_MusicPlayer">1.0版本</abbr>已终止更新
            <br>
            <a href="/Legacy-1.0/index.html" title="返回1.0版本主页">返回1.0主页</a>
        </p>
    </section>
</aside>
<footer>
    <p>&copy; 2022-2026 滄海水魚. 保留所有权利。</p>
    <p>当前版本：<strong>2.0.2.5-20260106</strong></p>
</footer>
<!-- 分步加载 & 轻量懒加载库 -->
<script>
// 首先加载 lazysizes（用于图片/iframe 等懒加载），然后按需动态导入交互脚本
(function(){
    // 插入 lazysizes 脚本（CDN 小脚本，未阻塞渲染）
    var s = document.createElement('script');
    s.src = 'https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js';
    s.async = true;
    document.head.appendChild(s);

    // 当主交互首次需要时再加载模块（通过事件触发）
    function loadInteractionModules(){
        if(window._interactionLoaded) return;
        window._interactionLoaded = true;
        // 使用动态 import 分步加载局部脚本（如果浏览器支持）
        if('noModule' in HTMLScriptElement.prototype){
            // 先加载 avatar-loader（模块），并调用初始化
            import('/js/avatar-loader.js').then(function(m){ try{ m.initAvatarLoader && m.initAvatarLoader(); }catch(e){} }).catch(()=>{});
            import('/js/avatar.js').catch(()=>{});
            import('/js/theme.js').catch(()=>{});
            import('/js/sidebar.js').catch(()=>{});
            import('/js/scroll-to-top.js').catch(()=>{});
            import('/js/settings-modal.js').catch(()=>{});
        } else {
            // 回退：按需创建 script 标签
            var toLoad = ['/js/image-loader.nomodule.js','/js/avatar.js','/js/theme.js','/js/sidebar.js','/js/scroll-to-top.js','/js/settings-modal.js'];
            toLoad.forEach(function(p){
                var sc = document.createElement('script');
                sc.src = p;
                sc.async = true;
                document.body.appendChild(sc);
            });
        }
    }

    // 在用户交互（移动鼠标、按键、触屏）时加载交互脚本
    var events = ['mousemove','touchstart','keydown','click'];
    var evHandler = function(){ loadInteractionModules(); events.forEach(function(e){ window.removeEventListener(e, evHandler); }); };
    events.forEach(function(e){ window.addEventListener(e, evHandler, {passive:true}); });

    // 2 秒后作为降级加载（用户可能未交互）
    setTimeout(loadInteractionModules, 2000);
})();
</script>